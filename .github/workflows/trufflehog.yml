name: trufflehog
on: push
jobs:
  Scan-Build:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@master
    - name: trufflehog-actions-scan
      uses: edplato/trufflehog-actions-scan@master
      env:
        WORKSPACE: https://github.com/${{ github.repository }}/blob/${{ github.sha }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        SCAN_AUTO_BUILD: true
      with:
        output: reports
    - name: Upload report
      uses: actions/upload-artifact@v1.0.0
      with:
        name: trufflehog-scan-reports
        path: reports
